<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CS2 Skin Upgrader</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@700&family=Roboto:wght@400;700&family=Poppins:wght@400;600;700&family=Science+Gothic:wght@300..700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="style.css">
    <style>
        /* Specific styles for Upgrader Page */
        body {
            overflow-y: auto; /* Enable scrolling */
        }

        #upgrader-container {
            display: flex;
            flex-direction: column;
            align-items: center;
            padding: 20px;
            max-width: 1400px;
            margin: 0 auto;
            width: 100%;
        }

        .upgrader-top-section {
            display: flex;
            justify-content: center;
            align-items: center;
            width: 100%;
            margin-bottom: 40px;
            gap: 50px;
            position: relative;
        }

        /* Circular Roulette */
        .upgrade-roulette-container {
            position: relative;
            width: 300px;
            height: 300px;
            display: flex;
            justify-content: center;
            align-items: center;
        }

        .upgrade-circle-bg {
            position: absolute;
            width: 100%;
            height: 100%;
            border-radius: 50%;
            background: #0a0e17; /* Dark circle background */
            box-shadow: 0 0 50px rgba(0,0,0,0.5);
            z-index: 1;
        }

        .upgrade-circle-progress {
            position: absolute;
            width: 100%;
            height: 100%;
            border-radius: 50%;
            /* Logic for conic-gradient will be handled in JS */
            background: conic-gradient(#ffc107 0% 0%, transparent 0% 100%);
            z-index: 2;
            opacity: 0.8;
            mask: radial-gradient(transparent 65%, black 66%);
            -webkit-mask: radial-gradient(transparent 65%, black 66%);
        }

        .upgrade-pointer-container {
            position: absolute;
            width: 110%; /* Slightly larger than circle */
            height: 110%;
            z-index: 3;
            pointer-events: none;
            transition: transform 0.1s linear; /* Smooth movement during spin */
        }

        .upgrade-pointer {
            position: absolute;
            top: 0;
            left: 50%;
            transform: translateX(-50%) translateY(-5px); /* Position at top */
            width: 0;
            height: 0;
            border-left: 10px solid transparent;
            border-right: 10px solid transparent;
            border-top: 15px solid #fff;
            filter: drop-shadow(0 0 5px rgba(255,255,255,0.8));
        }

        .upgrade-stats {
            position: absolute;
            z-index: 4;
            text-align: center;
            color: white;
        }

        .upgrade-stats h2 {
            font-size: 3em;
            margin: 0;
            font-family: 'Science Gothic', sans-serif;
            color: white;
            text-shadow: 0 0 10px rgba(255, 255, 255, 0.2);
        }

        .upgrade-stats p {
            color: #888;
            margin: 0;
            text-transform: uppercase;
            font-size: 0.9em;
            letter-spacing: 1px;
        }

        /* Item Selection Areas */
        .selection-area {
            text-align: center;
            width: 250px;
            height: 300px; /* Increased height for grid */
            display: flex;
            flex-direction: column;
            justify-content: flex-start; /* Align top */
            align-items: center;
            position: relative;
            padding-top: 20px;
        }

        .selected-items-grid {
            width: 100%;
            height: 160px; /* Fixed area for images */
            display: flex;
            flex-wrap: wrap;
            justify-content: center;
            align-items: center;
            gap: 5px;
            margin-bottom: 10px;
            overflow-y: auto;
        }

        .selected-items-grid img {
            width: 85px;
            height: 85px;
            object-fit: contain;
            filter: drop-shadow(0 0 5px rgba(0,0,0,0.5));
            transition: transform 0.3s ease;
        }

        .selected-items-grid img:only-child {
            width: 150px;
            height: 120px;
        }

        .selected-items-grid img.placeholder {
            opacity: 0.1;
            filter: grayscale(100%);
            width: 120px;
            height: 120px;
        }

        .selection-area h3 {
            font-size: 1.2em;
            margin: 5px 0;
            color: #fff;
        }

        .selection-area p {
            color: #666;
            font-size: 0.9em;
            margin: 0;
        }

        .price-tag {
            background: rgba(255, 255, 255, 0.1);
            padding: 5px 10px;
            border-radius: 5px;
            font-family: 'Science Gothic', sans-serif;
            color: #ffc107;
            margin-top: 10px;
            display: inline-block;
        }

        .multiplier-section {
            display: flex;
            justify-content: center;
            align-items: center;
            gap: 15px;
            margin-bottom: 30px;
            width: 100%;
        }

        .multiplier-btn {
            width: 60px;
            height: 60px;
            background: rgba(255, 255, 255, 0.05);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 50%; /* Hexagon implies clip-path or image, but circle is easier. Let's try Hexagon with CSS */
            display: flex;
            justify-content: center;
            align-items: center;
            color: #888;
            font-weight: bold;
            font-family: 'Science Gothic', sans-serif;
            cursor: pointer;
            transition: all 0.3s ease;
            clip-path: polygon(25% 0%, 75% 0%, 100% 50%, 75% 100%, 25% 100%, 0% 50%);
            border-radius: 0; /* Reset for hexagon */
            width: 70px;
            height: 60px;
            background-color: #1a1a1a;
        }

        .multiplier-btn:hover {
            background-color: #2a2a2a;
            color: #fff;
            transform: translateY(-2px);
        }

        .multiplier-btn.active {
            background-color: #ffc107;
            color: #1a1a1a;
            box-shadow: 0 0 15px rgba(255, 193, 7, 0.4);
        }

        .upgrade-btn-main {
            background: #0d47a1; /* Blue as in reference */
            color: #fff;
            border: none;
            padding: 15px 50px;
            font-size: 1.2em;
            font-weight: bold;
            border-radius: 8px;
            cursor: pointer;
            text-transform: uppercase;
            box-shadow: 0 5px 15px rgba(13, 71, 161, 0.4);
            transition: all 0.3s ease;
            margin-bottom: 40px;
        }

        .upgrade-btn-main:hover {
            background: #1565c0;
            transform: translateY(-2px);
            box-shadow: 0 8px 20px rgba(13, 71, 161, 0.6);
        }

        .upgrade-btn-main:disabled {
            background: #333;
            color: #666;
            cursor: not-allowed;
            box-shadow: none;
        }

        /* Inventories Section */
        .inventories-wrapper {
            display: flex;
            width: 100%;
            gap: 20px;
            justify-content: space-between;
        }

        .inventory-column {
            flex: 1;
            background: rgba(30, 30, 30, 0.5);
            border-radius: 12px;
            padding: 20px;
            border: 1px solid rgba(255, 255, 255, 0.05);
            display: flex;
            flex-direction: column;
            height: 600px; /* Fixed height for scroll */
        }

        .inventory-column h3 {
            margin-top: 0;
            color: #fff;
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
            padding-bottom: 15px;
            margin-bottom: 15px;
            display: flex;
            justify-content: space-between;
        }

        .inventory-column-content {
            flex: 1;
            overflow-y: auto;
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(140px, 1fr));
            gap: 10px;
            padding-right: 5px; /* Space for scrollbar */
            align-content: start;
        }

        .inventory-item-upgrade {
            background: rgba(0, 0, 0, 0.3);
            border-radius: 8px;
            padding: 10px;
            cursor: pointer;
            border: 1px solid transparent;
            transition: all 0.2s;
            text-align: center;
        }

        .inventory-item-upgrade:hover {
            background: rgba(255, 255, 255, 0.05);
        }

        .inventory-item-upgrade.selected {
            border-color: #ffc107;
            background: rgba(255, 193, 7, 0.1);
        }

        .inventory-item-upgrade img {
            width: 100%;
            height: 80px;
            object-fit: contain;
        }

        .inventory-item-upgrade span {
            display: block;
            font-size: 0.8em;
            margin-top: 5px;
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
        }

        .inventory-item-upgrade .price {
            color: #ffc107;
            font-family: 'Science Gothic', sans-serif;
            font-size: 0.85em;
        }

        /* Search inputs */
        .search-box {
            width: 100%;
            padding: 10px;
            background: rgba(0,0,0,0.3);
            border: 1px solid rgba(255,255,255,0.1);
            color: white;
            border-radius: 5px;
            margin-bottom: 15px;
        }

        /* Win Animation Pulse */
        @keyframes pulse-green {
            0% { box-shadow: 0 0 0 0 rgba(40, 167, 69, 0.7); }
            70% { box-shadow: 0 0 0 20px rgba(40, 167, 69, 0); }
            100% { box-shadow: 0 0 0 0 rgba(40, 167, 69, 0); }
        }

        @keyframes pulse-red {
            0% { box-shadow: 0 0 0 0 rgba(220, 53, 69, 0.7); }
            70% { box-shadow: 0 0 0 20px rgba(220, 53, 69, 0); }
            100% { box-shadow: 0 0 0 0 rgba(220, 53, 69, 0); }
        }

        .win-pulse {
            animation: pulse-green 1s infinite;
        }

        .lose-pulse {
            animation: pulse-red 1s infinite;
        }

    </style>
</head>
<body>
    <header>
        <div class="header-left">
            <a href="index.html" class="btn-back-professional" style="text-decoration: none; position: static; display: flex;"><span>&larr;</span> Voltar</a>
        </div>
        <div class="logo-container">
            <img src="images/logo.png" alt="CSTWO Logo" id="navbar-logo">
        </div>
        <div class="header-right">
            <div class="user-info" id="user-info-display">
                <img src="https://via.placeholder.com/50" alt="User Avatar" id="user-avatar">
                <span id="user-balance">R$ 0,00</span>
            </div>
        </div>
    </header>

    <div id="upgrader-container">
        <!-- Top Section: Selected Items & Roulette -->
        <div class="upgrader-top-section">
            <!-- Left: User Selection -->
            <div class="selection-area" id="left-selection">
                <div class="selected-items-grid" id="left-items-container">
                    <img src="https://via.placeholder.com/200x150?text=Item" alt="Item" class="placeholder">
                </div>
                <h3>Escolha seus itens</h3>
                <p>Itens para aprimorar</p>
                <div class="price-tag" id="left-price">R$ 0,00</div>
            </div>

            <!-- Center: Roulette -->
            <div class="upgrade-roulette-container">
                <div class="upgrade-circle-bg"></div>
                <div class="upgrade-circle-progress" id="roulette-progress"></div>
                <div class="upgrade-pointer-container" id="roulette-pointer-container">
                    <div class="upgrade-pointer"></div>
                </div>
                <div class="upgrade-stats">
                    <h2 id="win-chance">0.00%</h2>
                    <p>Chance de sucesso</p>
                </div>
            </div>

            <!-- Right: Target Selection -->
            <div class="selection-area" id="right-selection">
                <div class="selected-items-grid" id="right-items-container">
                    <img src="https://via.placeholder.com/200x150?text=Target" alt="Target" class="placeholder">
                </div>
                <h3>Selecionar itens</h3>
                <p>Que deseja receber</p>
                <div class="price-tag" id="right-price">R$ 0,00</div>
            </div>
        </div>

        <!-- Multiplier Buttons -->
        <div class="multiplier-section">
            <div class="multiplier-btn" data-mult="1.2">1.2x</div>
            <div class="multiplier-btn" data-mult="1.5">1.5x</div>
            <div class="multiplier-btn" data-mult="2">2x</div>
            <div class="multiplier-btn" data-mult="5">5x</div>
            <div class="multiplier-btn" data-mult="10">10x</div>
        </div>

        <!-- Upgrade Button -->
        <button class="upgrade-btn-main" id="upgrade-btn-action" disabled>Aprimorar</button>

        <!-- Inventories -->
        <div class="inventories-wrapper">
            <!-- Left: User Inventory -->
            <div class="inventory-column">
                <h3>
                    Meu Inventário
                    <span style="font-size: 0.8em; color: #888;">Ordenado por preço</span>
                </h3>
                <input type="text" class="search-box" placeholder="Procurar..." id="search-left">
                <div class="inventory-column-content" id="inventory-left">
                    <!-- JS Populated -->
                </div>
            </div>

            <!-- Right: Site Inventory -->
            <div class="inventory-column">
                <h3>
                    Itens a serem recebidos
                    <span style="font-size: 0.8em; color: #888;">Ordenado por preço</span>
                </h3>
                <input type="text" class="search-box" placeholder="Procurar..." id="search-right">
                <div class="inventory-column-content" id="inventory-right">
                    <!-- JS Populated -->
                </div>
            </div>
        </div>
    </div>

    <!-- Reusing case data from script.js logic, but need to extract it or copy it.
         Since script.js has DOM manipulation that might fail here, we should duplicate the data structure
         or load a data-only script.
         For now, I'll inline the data loader script that extracts data from cases object if I can't import it cleanly.
         Wait, script.js executes immediately on load.
         Better to create a data.js but I cannot easily refactor script.js without breaking things potentially.
         I will copy the `cases` object into upgrader.js.
    -->
    <script src="upgrader.js"></script>
</body>
</html>